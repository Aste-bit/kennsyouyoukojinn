<!DOCTYPE html>
<html lang="ja" data-theme="light">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="robots" content="noindex, nofollow, noarchive">
<title>Focus Goals â€” æ˜Ÿé‡èˆœ</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Source+Serif+4:ital,opsz,wght@0,8..60,300;0,8..60,400;0,8..60,600;0,8..60,700;0,8..60,800;1,8..60,300;1,8..60,400&family=DM+Sans:wght@400;500;600;700;800&family=Noto+Sans+JP:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box;}
:root{
  --ink:#2a2418;--ink-2:#4a4038;--ink-3:#8a7e6c;--ink-4:#b8ae9a;--ink-5:#d8d0c0;
  --surface:#faf8f4;--surface-2:#f4f1ea;--surface-3:#e8e2d6;
  --card:#ffffff;--stripe:#f8f5ee;
  --accent:#c45522;--accent-light:#fef0e8;--accent-muted:#e8a880;
  --green:#3a8a48;--green-light:#eef7f0;--green-muted:#b8dcc0;
  --amber:#b8860b;--amber-light:#fdf6e8;--amber-muted:#f0dfa0;
  --red:#c44040;--red-light:#fef0f0;
  --purple:#6b5ec4;--purple-light:#f0edf8;
  --blue:#2563eb;--blue-light:#eff4ff;
  --radius:8px;--radius-lg:12px;
  --font-serif:'Source Serif 4','Noto Sans JP',Georgia,serif;
  --font-sans:'DM Sans','Noto Sans JP',sans-serif;
  --shadow-sm:0 1px 3px rgba(42,36,24,0.04);
  --shadow-md:0 4px 12px rgba(42,36,24,0.07);
  --shadow-lg:0 12px 32px rgba(42,36,24,0.1);
  --border-thick:2px solid var(--ink);
  --border-thin:1px solid var(--surface-3);
}
[data-theme="dark"]{
  --ink:#e8e4d8;--ink-2:#c8c0b0;--ink-3:#a09880;--ink-4:#706850;--ink-5:#484030;
  --surface:#1c1b17;--surface-2:#242320;--surface-3:#3a3930;
  --card:#2a2924;--stripe:#2e2c24;
  --accent:#e87840;--accent-light:#3a2418;--accent-muted:#6a3820;
  --green:#6ab870;--green-light:#1a2e1c;--green-muted:#2a4a2e;
  --amber:#e0a620;--amber-light:#2e2818;--amber-muted:#4a3d10;
  --red:#ef6b6b;--red-light:#2e1a1a;
  --purple:#9b8ee8;--purple-light:#252040;
  --blue:#5b8def;--blue-light:#1a2440;
  --shadow-sm:0 1px 3px rgba(0,0,0,0.2);
  --shadow-md:0 4px 12px rgba(0,0,0,0.25);
  --shadow-lg:0 12px 32px rgba(0,0,0,0.35);
  --border-thick:2px solid var(--ink);
  --border-thin:1px solid var(--surface-3);
}
body{font-family:var(--font-serif);background:var(--surface);color:var(--ink);min-height:100vh;-webkit-font-smoothing:antialiased;line-height:1.6;transition:background 0.4s,color 0.4s;}
.container{max-width:860px;margin:0 auto;padding:0 20px;}
@media(min-width:768px){.container{padding:0 36px;}}
</style>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.9/babel.min.js"></script>
</head>
<body>
<div id="root"></div>
<script type="text/babel">
const {useState,useEffect,useCallback,useMemo} = React;

const ALERT_TEXT = {
  stale: "30æ—¥ä»¥ä¸Šæ›´æ–°ãŒã‚ã‚Šã¾ã›ã‚“",
  granularity: "ã‚‚ã†å°‘ã—å…·ä½“çš„ã«ã§ãã‚‹ã‹ã‚‚",
  overdue: "æœŸé™ã‚’éãã¦ã„ã¾ã™",
  pace: "ãƒšãƒ¼ã‚¹ãŒå°‘ã—ã‚†ã£ãã‚Šã§ã™",
  noGoal: "ã‚´ãƒ¼ãƒ«ãŒæœªè¨­å®šã§ã™",
};
function getAlertText(k){return ALERT_TEXT[k]||k||'';}
function calcElapsedDays(d){return d?Math.ceil((TODAY-new Date(d))/86400000):0;}
function getStaleText(d){return `${calcElapsedDays(d)}æ—¥é–“æ›´æ–°ãŒã‚ã‚Šã¾ã›ã‚“`;}
function getAlertTextDynamic(k,d){if(k==='stale'&&d)return getStaleText(d);return getAlertText(k);}

const TODAY=new Date();TODAY.setHours(0,0,0,0);
const TODAY_STR=`${TODAY.getFullYear()}.${String(TODAY.getMonth()+1).padStart(2,'0')}.${String(TODAY.getDate()).padStart(2,'0')}`;
const WEEKDAYS=['Sun','Mon','Tue','Wed','Thu','Fri','Sat'];
const TODAY_DISPLAY=`${TODAY_STR} ${WEEKDAYS[TODAY.getDay()]}`;
const TODAY_JP=`${TODAY.getFullYear()}å¹´${TODAY.getMonth()+1}æœˆ${TODAY.getDate()}æ—¥ï¼ˆ${'æ—¥æœˆç«æ°´æœ¨é‡‘åœŸ'[TODAY.getDay()]}ï¼‰`;

const TREE={id:"root",level:0,title:"æ˜Ÿé‡èˆœ å…¨ä½“ã‚´ãƒ¼ãƒ«",children:[
  {id:"b1",level:1,title:"Addnesså®šå¸¸æ¥­å‹™ã®å¥å…¨æ€§ã‚’å…¨ç¤¾ã§æ‹…ä¿ã™ã‚‹",children:[
    {id:"b1-1",level:2,title:"ã‚´ãƒ¼ãƒ«è¨­å®šãƒ»åˆ†è§£ã‚’å…¨å“¡100%å®Œäº†ã•ã›ã‚‹",children:[
      {id:"b1-1-1",level:3,title:"ã‚´ãƒ¼ãƒ«è¨­å®šãƒ»ã‚´ãƒ¼ãƒ«åˆ†è§£ï¼ˆå®šå¸¸æ¥­å‹™è¨­å®šï¼‰ã‚’å…¨å“¡100%å®Œäº†ã•ã›ã‚‹",setDate:"2026-01-30",deadline:"2026-03-15",progress:65,status:"on_track"},
      {id:"b1-1-2",level:3,title:"Addnessã‚´ãƒ¼ãƒ«è¨­å®šï¼†Todoè¨­å®šç®¡ç†",setDate:"2026-02-05",deadline:"2026-03-10",progress:40,status:"on_track"},
    ]},
    {id:"b1-2",level:2,title:"ã‚¿ã‚¹ã‚¯æå‡ºç‡ã‚’å®‰å®šã•ã›ã‚‹",children:[
      {id:"b1-2-1",level:3,title:"æå‡ºã‚¿ã‚¹ã‚¯ã®Addness TodoåŒ–100%ã‚’é”æˆã™ã‚‹",setDate:"2026-01-30",deadline:"2026-03-15",progress:70,status:"on_track"},
      {id:"b1-2-2",level:3,title:"æå‡ºç‡75%ä»¥ä¸Šã‚’é”æˆã™ã‚‹",setDate:"2026-01-30",deadline:"2026-03-15",progress:55,status:"on_track"},
      {id:"b1-2-3",level:3,title:"æ—¥ã€…ã®ã‚¿ã‚¹ã‚¯æå‡ºç®¡ç†",setDate:"2026-02-05",deadline:"2026-03-10",progress:50,status:"on_track"},
      {id:"b1-2-4",level:3,title:"ã€å®šå¸¸æ¥­å‹™ã€‘ã‚¿ã‚¹ã‚¯æå‡ºãƒ»Addnessç®¡ç†",setDate:"2026-02-05",deadline:"2026-03-10",progress:45,status:"on_track"},
    ]},
  ]},
  {id:"b2",level:1,title:"å®šå¸¸æ¥­å‹™ å¥å…¨æ€§ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰åŸºç›¤ã‚’æ§‹ç¯‰ã™ã‚‹",children:[
    {id:"b2-g",level:2,title:"ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰æ§‹ç¯‰ãƒ»é‹ç”¨",children:[
      {id:"b2-1",level:3,title:"ã€æ§‹ç¯‰PJã€‘ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ï¼ˆGAS Web Appï¼‰",setDate:"2026-02-12",deadline:"2026-03-20",progress:60,status:"on_track"},
      {id:"b2-2",level:3,title:"Web Appæ”¹ä¿®ï¼šè¡¨ç¤ºãƒã‚°ä¿®æ­£ï¼‹è¦–è¦šæ”¹å–„ï¼‹æœˆã‚»ãƒ¬ã‚¯ã‚¿",setDate:"2026-02-12",deadline:"2026-03-15",progress:35,status:"on_track"},
      {id:"b2-3",level:3,title:"ã€æ§‹ç¯‰PJã€‘éå»æœˆãƒ‡ãƒ¼ã‚¿å–å¾—ã®è‡ªå‹•åŒ–",setDate:"2026-02-12",deadline:"2026-03-20",progress:20,status:"on_track"},
    ]},
    {id:"b2-h",level:2,title:"å¤–éƒ¨é€£æºãƒ»é‹ç”¨ãƒ•ãƒ­ãƒ¼æ•´å‚™",children:[
      {id:"b2-4",level:3,title:"ã€æ§‹ç¯‰PJã€‘Looker Studioçµ±åˆ",setDate:"2026-02-12",deadline:"2026-03-25",progress:15,status:"on_track"},
      {id:"b2-5",level:3,title:"ã€æ§‹ç¯‰PJã€‘æœˆæ¬¡é‹ç”¨ãƒ•ãƒ­ãƒ¼ç¢ºå®š",setDate:"2026-02-12",deadline:"2026-03-20",progress:10,status:"on_track"},
      {id:"b2-6",level:3,title:"ã€æ§‹ç¯‰PJã€‘URLãªã—ãƒ¡ãƒ³ãƒãƒ¼å¯¾å¿œ",setDate:"2026-02-12",deadline:"2026-03-15",progress:30,status:"on_track"},
    ]},
  ]},
  {id:"b3",level:1,title:"ã€Œæ˜Ÿé‡èˆœã€å…¨ä½“ã®å®šå¸¸æ¥­å‹™(ä»•çµ„ã¿)ã®å¥å…¨æ€§æ‹…ä¿",children:[
    {id:"b3-1",level:2,title:"çµŒç†ãƒ»å…¥é‡‘å‡¦ç†ã‚’æ¼ã‚Œãªãå›ã™",children:[
      {id:"b3-1-1",level:3,title:"å¥‘ç´„ãƒ‡ãƒ¼ã‚¿ã®å–è¾¼ï¼ˆ1,8,15,22ï¼‰",setDate:"2026-02-05",deadline:"2026-03-05",progress:80,status:"on_track"},
      {id:"b3-1-2",level:3,title:"MOSHå…¥é‡‘ãƒ‡ãƒ¼ã‚¿å–è¾¼ã¨ãã®å¾Œã®å‡¦ç†ï¼ˆ1,16ï¼‰",setDate:"2026-02-05",deadline:"2026-03-05",progress:75,status:"on_track"},
      {id:"b3-1-3",level:3,title:"CBSå…¥é‡‘ãƒ‡ãƒ¼ã‚¿å–è¾¼ï¼ˆ10,20,30ï¼‰",setDate:"2026-02-05",deadline:"2026-03-05",progress:70,status:"on_track"},
      {id:"b3-1-4",level:3,title:"æ—¥æœ¬ãƒ—ãƒ©ãƒ å…¥é‡‘ãƒ‡ãƒ¼ã‚¿å–è¾¼(5,10,15,20,25,30)",setDate:"2026-02-05",deadline:"2026-03-05",progress:65,status:"on_track"},
      {id:"b3-1-5",level:3,title:"ã€å®šå¸¸æ¥­å‹™ã€‘å£²æ›é‡‘ç®¡ç†",setDate:"2026-02-05",deadline:"2026-03-10",progress:50,status:"on_track"},
    ]},
    {id:"b3-2",level:2,title:"ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿æ•´å‚™",children:[
      {id:"b3-2-1",level:3,title:"å–å¼•å…ˆã®ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’ä½œã‚‹",setDate:"2026-01-07",deadline:"2026-02-15",progress:5,status:"warning",alertKey:"stale"},
    ]},
    {id:"b3-3g",level:2,title:"ç®¡ç†ãƒ„ãƒ¼ãƒ«ãƒ»ãƒ«ãƒ¼ãƒ«ç­–å®š",children:[
      {id:"b3-3",level:3,title:"è‰²åˆ†ã‘ãƒ«ãƒ¼ãƒ«æ±ºã‚",setDate:"2026-01-26",deadline:"2026-03-01",progress:60,status:"on_track"},
      {id:"b3-4",level:3,title:"å€‹äººç®¡ç†_2026å¹´ã‚·ãƒ¼ãƒˆ",setDate:"2026-01-29",deadline:"2026-03-01",progress:70,status:"on_track"},
    ]},
  ]},
]};

const GOALS=[
  {id:1,title:"ã‚´ãƒ¼ãƒ«è¨­å®šãƒ»ã‚´ãƒ¼ãƒ«åˆ†è§£ï¼ˆå®šå¸¸æ¥­å‹™è¨­å®šï¼‰ã‚’å…¨å“¡100%å®Œäº†ã•ã›ã‚‹",setDate:"2026-01-30",deadline:"2026-03-15",progress:65,status:"on_track",alertKey:"",path:["æ˜Ÿé‡èˆœ å…¨ä½“ã‚´ãƒ¼ãƒ«","Addnesså®šå¸¸æ¥­å‹™ã®å¥å…¨æ€§ã‚’å…¨ç¤¾ã§æ‹…ä¿ã™ã‚‹","ã‚´ãƒ¼ãƒ«è¨­å®šãƒ»åˆ†è§£ã‚’å…¨å“¡100%å®Œäº†ã•ã›ã‚‹"]},
  {id:2,title:"æå‡ºã‚¿ã‚¹ã‚¯ã®Addness TodoåŒ–100%ã‚’é”æˆã™ã‚‹",setDate:"2026-01-30",deadline:"2026-03-15",progress:70,status:"on_track",alertKey:"",path:["æ˜Ÿé‡èˆœ å…¨ä½“ã‚´ãƒ¼ãƒ«","Addnesså®šå¸¸æ¥­å‹™ã®å¥å…¨æ€§ã‚’å…¨ç¤¾ã§æ‹…ä¿ã™ã‚‹","ã‚¿ã‚¹ã‚¯æå‡ºç‡ã‚’å®‰å®šã•ã›ã‚‹"]},
  {id:3,title:"æå‡ºç‡75%ä»¥ä¸Šã‚’é”æˆã™ã‚‹",setDate:"2026-01-30",deadline:"2026-03-15",progress:55,status:"on_track",alertKey:"",path:["æ˜Ÿé‡èˆœ å…¨ä½“ã‚´ãƒ¼ãƒ«","Addnesså®šå¸¸æ¥­å‹™ã®å¥å…¨æ€§ã‚’å…¨ç¤¾ã§æ‹…ä¿ã™ã‚‹","ã‚¿ã‚¹ã‚¯æå‡ºç‡ã‚’å®‰å®šã•ã›ã‚‹"]},
  {id:4,title:"Web Appæ”¹ä¿®ï¼šè¡¨ç¤ºãƒã‚°ä¿®æ­£ï¼‹è¦–è¦šæ”¹å–„ï¼‹æœˆã‚»ãƒ¬ã‚¯ã‚¿",setDate:"2026-02-12",deadline:"2026-03-15",progress:35,status:"on_track",alertKey:"",path:["æ˜Ÿé‡èˆœ å…¨ä½“ã‚´ãƒ¼ãƒ«","å¥å…¨æ€§ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰åŸºç›¤ã‚’æ§‹ç¯‰ã™ã‚‹","ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰æ§‹ç¯‰ãƒ»é‹ç”¨"]},
  {id:5,title:"ã€æ§‹ç¯‰PJã€‘ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ï¼ˆGAS Web Appï¼‰",setDate:"2026-02-12",deadline:"2026-03-20",progress:60,status:"on_track",alertKey:"",path:["æ˜Ÿé‡èˆœ å…¨ä½“ã‚´ãƒ¼ãƒ«","å¥å…¨æ€§ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰åŸºç›¤ã‚’æ§‹ç¯‰ã™ã‚‹","ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰æ§‹ç¯‰ãƒ»é‹ç”¨"]},
  {id:6,title:"ã€æ§‹ç¯‰PJã€‘éå»æœˆãƒ‡ãƒ¼ã‚¿å–å¾—ã®è‡ªå‹•åŒ–",setDate:"2026-02-12",deadline:"2026-03-20",progress:20,status:"on_track",alertKey:"",path:["æ˜Ÿé‡èˆœ å…¨ä½“ã‚´ãƒ¼ãƒ«","å¥å…¨æ€§ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰åŸºç›¤ã‚’æ§‹ç¯‰ã™ã‚‹","ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰æ§‹ç¯‰ãƒ»é‹ç”¨"]},
  {id:7,title:"ã€æ§‹ç¯‰PJã€‘Looker Studioçµ±åˆ",setDate:"2026-02-12",deadline:"2026-03-25",progress:15,status:"on_track",alertKey:"",path:["æ˜Ÿé‡èˆœ å…¨ä½“ã‚´ãƒ¼ãƒ«","å¥å…¨æ€§ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰åŸºç›¤ã‚’æ§‹ç¯‰ã™ã‚‹","å¤–éƒ¨é€£æºãƒ»é‹ç”¨ãƒ•ãƒ­ãƒ¼æ•´å‚™"]},
  {id:8,title:"ã€æ§‹ç¯‰PJã€‘æœˆæ¬¡é‹ç”¨ãƒ•ãƒ­ãƒ¼ç¢ºå®š",setDate:"2026-02-12",deadline:"2026-03-20",progress:10,status:"on_track",alertKey:"",path:["æ˜Ÿé‡èˆœ å…¨ä½“ã‚´ãƒ¼ãƒ«","å¥å…¨æ€§ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰åŸºç›¤ã‚’æ§‹ç¯‰ã™ã‚‹","å¤–éƒ¨é€£æºãƒ»é‹ç”¨ãƒ•ãƒ­ãƒ¼æ•´å‚™"]},
  {id:9,title:"ã€æ§‹ç¯‰PJã€‘URLãªã—ãƒ¡ãƒ³ãƒãƒ¼å¯¾å¿œ",setDate:"2026-02-12",deadline:"2026-03-15",progress:30,status:"on_track",alertKey:"",path:["æ˜Ÿé‡èˆœ å…¨ä½“ã‚´ãƒ¼ãƒ«","å¥å…¨æ€§ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰åŸºç›¤ã‚’æ§‹ç¯‰ã™ã‚‹","å¤–éƒ¨é€£æºãƒ»é‹ç”¨ãƒ•ãƒ­ãƒ¼æ•´å‚™"]},
  {id:10,title:"ã€æ§‹ç¯‰PJã€‘å®šå¸¸æ¥­å‹™ å¥å…¨æ€§ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰åŸºç›¤ã‚’æ§‹ç¯‰ã™ã‚‹",setDate:"2026-02-12",deadline:"2026-03-25",progress:25,status:"on_track",alertKey:"",path:["æ˜Ÿé‡èˆœ å…¨ä½“ã‚´ãƒ¼ãƒ«","å¥å…¨æ€§ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰åŸºç›¤ã‚’æ§‹ç¯‰ã™ã‚‹"]},
  {id:11,title:"å–å¼•å…ˆã®ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’ä½œã‚‹",setDate:"2026-01-07",deadline:"2026-02-15",progress:5,status:"warning",alertKey:"stale",path:["æ˜Ÿé‡èˆœ å…¨ä½“ã‚´ãƒ¼ãƒ«","å…¨ä½“ã®å®šå¸¸æ¥­å‹™ã®å¥å…¨æ€§æ‹…ä¿","ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿æ•´å‚™"]},
  {id:12,title:"ã€Œæ˜Ÿé‡èˆœã€å…¨ä½“ã®å®šå¸¸æ¥­å‹™(ä»•çµ„ã¿)ã®å¥å…¨æ€§æ‹…ä¿",setDate:"2026-01-23",deadline:"2026-03-31",progress:40,status:"on_track",alertKey:"",path:["æ˜Ÿé‡èˆœ å…¨ä½“ã‚´ãƒ¼ãƒ«","å…¨ä½“ã®å®šå¸¸æ¥­å‹™ã®å¥å…¨æ€§æ‹…ä¿"]},
  {id:13,title:"æ—¥ã€…ã®ã‚¿ã‚¹ã‚¯æå‡ºç®¡ç†",setDate:"2026-02-05",deadline:"2026-03-10",progress:50,status:"on_track",alertKey:"",path:["æ˜Ÿé‡èˆœ å…¨ä½“ã‚´ãƒ¼ãƒ«","Addnesså®šå¸¸æ¥­å‹™ã®å¥å…¨æ€§ã‚’å…¨ç¤¾ã§æ‹…ä¿ã™ã‚‹","ã‚¿ã‚¹ã‚¯æå‡ºç‡ã‚’å®‰å®šã•ã›ã‚‹"]},
  {id:14,title:"å¥‘ç´„ãƒ‡ãƒ¼ã‚¿ã®å–è¾¼ï¼ˆ1,8,15,22ï¼‰",setDate:"2026-02-05",deadline:"2026-03-05",progress:80,status:"on_track",alertKey:"",path:["æ˜Ÿé‡èˆœ å…¨ä½“ã‚´ãƒ¼ãƒ«","å…¨ä½“ã®å®šå¸¸æ¥­å‹™ã®å¥å…¨æ€§æ‹…ä¿","çµŒç†ãƒ»å…¥é‡‘å‡¦ç†ã‚’æ¼ã‚Œãªãå›ã™"]},
  {id:15,title:"Addnessã‚´ãƒ¼ãƒ«è¨­å®šï¼†Todoè¨­å®šç®¡ç†",setDate:"2026-02-05",deadline:"2026-03-10",progress:40,status:"on_track",alertKey:"",path:["æ˜Ÿé‡èˆœ å…¨ä½“ã‚´ãƒ¼ãƒ«","Addnesså®šå¸¸æ¥­å‹™ã®å¥å…¨æ€§ã‚’å…¨ç¤¾ã§æ‹…ä¿ã™ã‚‹","ã‚´ãƒ¼ãƒ«è¨­å®šãƒ»åˆ†è§£ã‚’å…¨å“¡100%å®Œäº†ã•ã›ã‚‹"]},
  {id:16,title:"MOSHå…¥é‡‘ãƒ‡ãƒ¼ã‚¿å–è¾¼ã¨ãã®å¾Œã®å‡¦ç†ï¼ˆ1,16ï¼‰",setDate:"2026-02-05",deadline:"2026-03-05",progress:75,status:"on_track",alertKey:"",path:["æ˜Ÿé‡èˆœ å…¨ä½“ã‚´ãƒ¼ãƒ«","å…¨ä½“ã®å®šå¸¸æ¥­å‹™ã®å¥å…¨æ€§æ‹…ä¿","çµŒç†ãƒ»å…¥é‡‘å‡¦ç†ã‚’æ¼ã‚Œãªãå›ã™"]},
  {id:17,title:"ã€å®šå¸¸æ¥­å‹™ã€‘å£²æ›é‡‘ç®¡ç†",setDate:"2026-02-05",deadline:"2026-03-10",progress:50,status:"on_track",alertKey:"",path:["æ˜Ÿé‡èˆœ å…¨ä½“ã‚´ãƒ¼ãƒ«","å…¨ä½“ã®å®šå¸¸æ¥­å‹™ã®å¥å…¨æ€§æ‹…ä¿","çµŒç†ãƒ»å…¥é‡‘å‡¦ç†ã‚’æ¼ã‚Œãªãå›ã™"]},
  {id:18,title:"ã€å®šå¸¸æ¥­å‹™ã€‘ã‚¿ã‚¹ã‚¯æå‡ºãƒ»Addnessç®¡ç†",setDate:"2026-02-05",deadline:"2026-03-10",progress:45,status:"on_track",alertKey:"",path:["æ˜Ÿé‡èˆœ å…¨ä½“ã‚´ãƒ¼ãƒ«","Addnesså®šå¸¸æ¥­å‹™ã®å¥å…¨æ€§ã‚’å…¨ç¤¾ã§æ‹…ä¿ã™ã‚‹","ã‚¿ã‚¹ã‚¯æå‡ºç‡ã‚’å®‰å®šã•ã›ã‚‹"]},
  {id:19,title:"è‰²åˆ†ã‘ãƒ«ãƒ¼ãƒ«æ±ºã‚",setDate:"2026-01-26",deadline:"2026-03-01",progress:60,status:"on_track",alertKey:"",path:["æ˜Ÿé‡èˆœ å…¨ä½“ã‚´ãƒ¼ãƒ«","å…¨ä½“ã®å®šå¸¸æ¥­å‹™ã®å¥å…¨æ€§æ‹…ä¿","ç®¡ç†ãƒ„ãƒ¼ãƒ«ãƒ»ãƒ«ãƒ¼ãƒ«ç­–å®š"]},
  {id:20,title:"å€‹äººç®¡ç†_2026å¹´ã‚·ãƒ¼ãƒˆ",setDate:"2026-01-29",deadline:"2026-03-01",progress:70,status:"on_track",alertKey:"",path:["æ˜Ÿé‡èˆœ å…¨ä½“ã‚´ãƒ¼ãƒ«","å…¨ä½“ã®å®šå¸¸æ¥­å‹™ã®å¥å…¨æ€§æ‹…ä¿","ç®¡ç†ãƒ„ãƒ¼ãƒ«ãƒ»ãƒ«ãƒ¼ãƒ«ç­–å®š"]},
];

function countLeaves(n){if(!n.children||!n.children.length)return 1;return n.children.reduce((s,c)=>s+countLeaves(c),0);}
function calcRemainingDays(d){return d?Math.ceil((new Date(d)-TODAY)/86400000):null;}
function formatShortDate(d){return d?d.slice(5).replace('-','/'):'';}

/* â”€â”€ Icons â”€â”€ */
const Icon={
  chevron:p=><svg width="12" height="12" viewBox="0 0 12 12" fill="none" {...p}><path d="M4.5 2.5L8 6L4.5 9.5" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"/></svg>,
  check:p=><svg width="14" height="14" viewBox="0 0 14 14" fill="none" {...p}><path d="M3 7.5L5.5 10L11 4" stroke="currentColor" strokeWidth="1.8" strokeLinecap="round" strokeLinejoin="round"/></svg>,
  route:p=><svg width="14" height="14" viewBox="0 0 14 14" fill="none" {...p}><circle cx="7" cy="3" r="1.5" stroke="currentColor" strokeWidth="1.3"/><circle cx="7" cy="11" r="1.5" stroke="currentColor" strokeWidth="1.3"/><path d="M7 4.5V9.5" stroke="currentColor" strokeWidth="1.3" strokeDasharray="2 1.5"/></svg>,
  close:p=><svg width="16" height="16" viewBox="0 0 16 16" fill="none" {...p}><path d="M4 4L12 12M12 4L4 12" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round"/></svg>,
  alert:p=><svg width="13" height="13" viewBox="0 0 13 13" fill="none" {...p}><path d="M6.5 1L12 11.5H1L6.5 1Z" stroke="currentColor" strokeWidth="1.2" strokeLinejoin="round"/><path d="M6.5 5V7.5" stroke="currentColor" strokeWidth="1.2" strokeLinecap="round"/><circle cx="6.5" cy="9.2" r="0.6" fill="currentColor"/></svg>,
  external:p=><svg width="12" height="12" viewBox="0 0 12 12" fill="none" {...p}><path d="M9 3L4.5 7.5M9 3H6M9 3V6" stroke="currentColor" strokeWidth="1.3" strokeLinecap="round" strokeLinejoin="round"/><path d="M9 8V9.5A1.5 1.5 0 017.5 11H2.5A1.5 1.5 0 011 9.5V4.5A1.5 1.5 0 012.5 3H4" stroke="currentColor" strokeWidth="1.3" strokeLinecap="round"/></svg>,
  sun:p=><svg width="16" height="16" viewBox="0 0 16 16" fill="none" {...p}><circle cx="8" cy="8" r="3" stroke="currentColor" strokeWidth="1.3"/><path d="M8 1.5V3M8 13V14.5M1.5 8H3M13 8H14.5M3.4 3.4L4.5 4.5M11.5 11.5L12.6 12.6M3.4 12.6L4.5 11.5M11.5 4.5L12.6 3.4" stroke="currentColor" strokeWidth="1.2" strokeLinecap="round"/></svg>,
  moon:p=><svg width="16" height="16" viewBox="0 0 16 16" fill="none" {...p}><path d="M13.5 8.5a5.5 5.5 0 01-6-6 5.5 5.5 0 106 6z" stroke="currentColor" strokeWidth="1.3" strokeLinecap="round" strokeLinejoin="round"/></svg>,
  sortAsc:p=><svg width="12" height="12" viewBox="0 0 12 12" fill="none" {...p}><path d="M6 2V10M6 2L3 5M6 2L9 5" stroke="currentColor" strokeWidth="1.3" strokeLinecap="round" strokeLinejoin="round"/></svg>,
  sortDesc:p=><svg width="12" height="12" viewBox="0 0 12 12" fill="none" {...p}><path d="M6 10V2M6 10L3 7M6 10L9 7" stroke="currentColor" strokeWidth="1.3" strokeLinecap="round" strokeLinejoin="round"/></svg>,
  help:p=><svg width="16" height="16" viewBox="0 0 16 16" fill="none" {...p}><circle cx="8" cy="8" r="6.5" stroke="currentColor" strokeWidth="1.3"/><path d="M6 6.2a2 2 0 013.5 1.3c0 1.3-2 1.3-2 2.5" stroke="currentColor" strokeWidth="1.3" strokeLinecap="round"/><circle cx="7.5" cy="12" r="0.7" fill="currentColor"/></svg>,
};

const LEVEL_META=[
  {label:"å¤§ç›®æ¨™",tag:"L1",color:"var(--blue)",bg:"var(--blue-light)"},
  {label:"ä¸­é–“ç›®æ¨™",tag:"L2",color:"var(--amber)",bg:"var(--amber-light)"},
  {label:"ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚´ãƒ¼ãƒ«",tag:"L3",color:"var(--green)",bg:"var(--green-light)"},
];
function getLevelMeta(depth){if(depth<LEVEL_META.length)return LEVEL_META[depth];return{label:"ä¸­é–“ç›®æ¨™",tag:"L"+(depth+1),color:"var(--amber)",bg:"var(--amber-light)"};}

/* â”€â”€ Circular Progress â”€â”€ */
function CircleProgress({value,size=44,stroke=2.5,color}){
  const r=(size-stroke*2)/2;
  const circ=2*Math.PI*r;
  const offset=circ-((value||0)/100)*circ;
  return(
    <div style={{position:'relative',width:size,height:size,flexShrink:0}}>
      <svg width={size} height={size} viewBox={`0 0 ${size} ${size}`}>
        <circle cx={size/2} cy={size/2} r={r} fill="none" stroke="var(--surface-3)" strokeWidth={stroke}/>
        <circle cx={size/2} cy={size/2} r={r} fill="none" stroke={color} strokeWidth={stroke} strokeLinecap="round"
          strokeDasharray={circ} strokeDashoffset={offset} transform={`rotate(-90 ${size/2} ${size/2})`}
          style={{transition:'stroke-dashoffset 0.8s ease'}}/>
      </svg>
      <div style={{position:'absolute',inset:0,display:'flex',alignItems:'center',justifyContent:'center',
        fontSize:size>40?12:10,fontWeight:700,color:'var(--ink)',fontFamily:'var(--font-sans)'}}>{value}<span style={{fontSize:size>40?8:7,fontWeight:600,opacity:0.6}}>%</span></div>
    </div>
  );
}

/* â”€â”€ ProgressRow (bar style for tree) â”€â”€ */
function ProgressRow({deadline,progress,isWarn}){
  const remaining=calcRemainingDays(deadline);
  const isOverdue=remaining!==null&&remaining<0;
  const pColor=isWarn?'var(--amber)':progress>60?'var(--green)':'var(--accent)';
  return(
    <div className="progress-row">
      <CircleProgress value={progress} size={40} stroke={2.5} color={pColor}/>
      <span className="progress-days" style={{color:isOverdue?'var(--red)':remaining!==null&&remaining<7?'var(--amber)':'var(--ink-3)'}}>
        {isOverdue?`${Math.abs(remaining)}æ—¥è¶…é`:remaining!==null?`æ®‹${remaining}æ—¥`:''}
      </span>
    </div>
  );
}

/* â”€â”€ TreeNode â”€â”€ */
function TreeNode({node,depth=0,isLast=false}){
  const[open,setOpen]=useState(depth<2);
  const hasKids=node.children&&node.children.length>0;
  const isLeaf=!hasKids;
  const level=node.level||depth;
  const meta=isLeaf?{label:"ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚´ãƒ¼ãƒ«",tag:"L"+(level+1),color:"var(--green)",bg:"var(--green-light)"}:getLevelMeta(level);
  const remaining=calcRemainingDays(node.deadline);
  const leafCount=hasKids?countLeaves(node):0;
  const isWarn=node.status==="warning"||node.alertKey;
  const alertText=node.alertKey?getAlertTextDynamic(node.alertKey,node.setDate):'';
  return(
    <div className="t-item">
      <div className="t-rail">
        <div className="t-dot" style={{background:isWarn?'var(--amber)':isLeaf?'var(--green)':meta.color,boxShadow:isWarn?'0 0 0 3px var(--amber-light)':isLeaf?'0 0 0 3px var(--green-light)':'none'}}/>
        {!isLast&&<div className="t-line"/>}
      </div>
      <div className="t-body">
        <div className={"t-card"+(hasKids?" t-card--parent":"")+(isLeaf?" t-card--leaf":"")+(isWarn?" t-card--warn":"")} onClick={hasKids?()=>setOpen(!open):undefined}>
          <div className="t-card-top">
            <span className="t-tag" style={{background:isWarn?'var(--amber-light)':meta.bg,color:isWarn?'var(--amber)':meta.color}}>{meta.tag}</span>
            <span className="t-title">{node.title}</span>
            <div className="t-card-right">
              {alertText&&<span className="t-alert"><Icon.alert style={{color:'var(--amber)'}}/> {alertText}</span>}
              {isLeaf&&remaining!==null&&<span className="t-days" style={{color:remaining<0?'var(--red)':remaining<7?'var(--amber)':'var(--ink-3)'}}>{remaining<0?`${Math.abs(remaining)}æ—¥è¶…é`:`æ®‹${remaining}æ—¥`}</span>}
              {hasKids&&<span className="t-count">{leafCount}</span>}
              {hasKids&&<span className={"t-arrow"+(open?" t-arrow--open":"")}><Icon.chevron/></span>}
            </div>
          </div>
          {isLeaf&&node.setDate&&(
            <div className="t-card-bottom">
              <span className="t-meta">è¨­å®š {formatShortDate(node.setDate)}{node.deadline&&` â†’ æœŸé™ ${formatShortDate(node.deadline)}`}</span>
              {node.progress!==undefined&&(
                <div className="t-mini-progress">
                  <div className="t-mini-track"><div className="t-mini-fill" style={{width:node.progress+"%",background:isWarn?'var(--amber)':node.progress>60?'var(--green)':'var(--accent)'}}/></div>
                  <span className="t-mini-pct">{node.progress}%</span>
                </div>
              )}
            </div>
          )}
        </div>
        {hasKids&&open&&(
          <div className="t-children">{node.children.map((c,i)=><TreeNode key={c.id} node={c} depth={depth+1} isLast={i===node.children.length-1}/>)}</div>
        )}
      </div>
    </div>
  );
}

/* â”€â”€ PathPopup â”€â”€ */
function PathPopup({show,title,path,onClose}){
  if(!show)return null;
  const leafDepth=(path||[]).length+1;
  const leafMeta={label:"ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚´ãƒ¼ãƒ«",tag:"L"+leafDepth,color:"var(--green)"};
  return(
    <div className="overlay" onClick={onClose}>
      <div className="modal" onClick={e=>e.stopPropagation()}>
        <div className="modal-head"><div><div className="modal-title">ã‚´ãƒ¼ãƒ«ãƒ‘ã‚¹</div><div className="modal-sub">ä¸Šä½ã‚´ãƒ¼ãƒ«ã‹ã‚‰ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚´ãƒ¼ãƒ«ã¾ã§ã®çµŒè·¯</div></div>
          <button className="modal-close" onClick={onClose}><Icon.close/></button></div>
        <div className="path-list">
          {(path||[]).map((p,i)=>{const lv=getLevelMeta(i);return(
            <div key={i} className="path-item"><div className="path-rail"><div className="path-dot" style={{background:lv.color}}/><div className="path-line"/></div>
              <div className="path-body"><span className="path-label" style={{color:lv.color}}>{lv.tag}</span><span className="path-text">{p}</span></div></div>
          );})}
          <div className="path-item"><div className="path-rail"><div className="path-dot" style={{background:leafMeta.color}}/></div>
            <div className="path-body path-body--leaf"><span className="path-label" style={{color:leafMeta.color}}>{leafMeta.tag} {leafMeta.label}</span><span className="path-text">{title}</span></div></div>
        </div>
      </div>
    </div>
  );
}

/* â”€â”€ GoalCard (Nordic editorial style) â”€â”€ */
function GoalCard({goal,onConfirm,onPath,delay=0,index}){
  const[vis,setVis]=useState(false);
  useEffect(()=>{const t=setTimeout(()=>setVis(true),delay);return()=>clearTimeout(t);},[delay]);
  const isWarn=goal.status==="warning"||goal.alertKey;
  const alertText=goal.alertKey?getAlertTextDynamic(goal.alertKey,goal.setDate):'';
  const remaining=calcRemainingDays(goal.deadline);
  const isOverdue=remaining!==null&&remaining<0;
  const pColor=isWarn?'var(--amber)':goal.progress>60?'var(--green)':'var(--accent)';

  return(
    <div className={"g-row"+(isWarn?" g-row--warn":"")+(index%2===0?"":" g-row--stripe")} style={{opacity:vis?1:0,transform:vis?"translateY(0)":"translateY(6px)",transition:"opacity 0.35s ease,transform 0.35s ease"}}>
      <div className="g-num">{String(index+1).padStart(2,'0')}</div>
      <div className="g-main">
        <div className="g-top">
          <div className="g-info">
            <div className="g-title">{goal.title}</div>
            {alertText&&<div className="g-alert"><Icon.alert style={{width:11,height:11}}/> {alertText}</div>}
            <div className="g-path">{goal.path.join(' â€º ')}</div>
          </div>
          <div className="g-stats">
            <CircleProgress value={goal.progress} size={46} stroke={2.5} color={pColor}/>
            <div className="g-days" style={{color:isOverdue?'var(--red)':remaining!==null&&remaining<7?'var(--amber)':'var(--ink-3)'}}>
              {isOverdue?`${Math.abs(remaining)}æ—¥è¶…é`:remaining!==null?`æ®‹${remaining}æ—¥`:''}
            </div>
          </div>
        </div>
        <div className="g-actions">
          <button className="g-btn g-btn--path" onClick={()=>onPath(goal)}><Icon.route/> ãƒ‘ã‚¹ç…§ä¼š</button>
          {isWarn&&<button className={"g-btn g-btn--ack"+(goal.confirmed?" g-btn--acked":"")} onClick={()=>onConfirm(goal.id)}><Icon.check/> {goal.confirmed?"ç¢ºèªæ¸ˆã¿":"ç¢ºèªã™ã‚‹"}</button>}
          <button className="g-btn g-btn--detail">è©³ç´° <Icon.external/></button>
        </div>
      </div>
    </div>
  );
}

/* â”€â”€ LINE Phone â”€â”€ */
function LINEPhone({children}){
  return(
    <div className="phone-wrap"><div className="phone-frame">
      <div className="phone-status"><span className="phone-time">9:50</span><div className="phone-island"/><div className="phone-status-right"><div className="phone-battery"><div className="phone-battery-fill"/></div></div></div>
      <div className="line-nav"><div className="line-nav-left"><svg width="10" height="16" viewBox="0 0 10 16" fill="none"><path d="M8.5 1.5L2 8l6.5 6.5" stroke="#fff" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/></svg></div><div className="line-nav-center"><div className="line-nav-name">ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚´ãƒ¼ãƒ«é€šçŸ¥</div></div><div style={{width:24}}/></div>
      <div className="line-chat"><div className="line-date-pill">{TODAY_JP}</div>
        <div className="line-msg-row"><div className="line-avatar-circle"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M1 14.5c0-3 3-5 7-5s7 2 7 5" stroke="#fff" strokeWidth="1.2"/><circle cx="8" cy="5" r="3.5" stroke="#fff" strokeWidth="1.2"/></svg></div>
          <div className="line-msg-col"><div className="line-sender">ã‚´ãƒ¼ãƒ«é€šçŸ¥Bot</div><div className="line-bubble-wrap"><div className="line-bubble-body">{children}</div><div className="line-read-time"><span className="line-read">æ—¢èª­</span><span>9:50</span></div></div></div>
        </div>
      </div>
      <div className="line-input-bar"><div className="line-input-plus">+</div><div className="line-input-field">ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›</div></div>
      <div className="phone-home-bar"><div className="phone-home-indicator"/></div>
    </div></div>
  );
}

/* â”€â”€ HelpGuide â”€â”€ */
function HelpGuide({show,onClose}){
  const[section,setSection]=useState(0);
  if(!show)return null;
  const sections=[
    {title:"ã“ã®ã‚¢ãƒ—ãƒªã«ã¤ã„ã¦",icon:"ğŸ¯",content:(<div className="help-section"><p className="help-text"><strong>ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚´ãƒ¼ãƒ«</strong>ã¯ã€ã‚´ãƒ¼ãƒ«ãƒ„ãƒªãƒ¼ã®æœ«ç«¯ï¼ˆå…·ä½“çš„ãªã‚´ãƒ¼ãƒ«ï¼‰ã‚’ä¸€è¦§ã—ã€æ¯æ—¥ã®é€²æ—ç®¡ç†ã‚’æ”¯æ´ã™ã‚‹ã‚¢ãƒ—ãƒªã§ã™ã€‚</p><div className="help-box"><div className="help-box-title">3ã¤ã®ç”»é¢</div><div className="help-box-item"><span className="help-badge">ä»Šæ—¥ã®ã‚´ãƒ¼ãƒ«</span>ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚´ãƒ¼ãƒ«ã‚’ã‚«ãƒ¼ãƒ‰å½¢å¼ã§ä¸€è¦§</div><div className="help-box-item"><span className="help-badge">ã‚´ãƒ¼ãƒ«ãƒ„ãƒªãƒ¼</span>ä¸Šä½ç›®æ¨™ã€œæœ«ç«¯ã¾ã§ã®éšå±¤æ§‹é€ ã‚’è¡¨ç¤º</div><div className="help-box-item"><span className="help-badge">LINEé€šçŸ¥</span>æ¯æœå±ŠãLINEé€šçŸ¥ã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼</div></div></div>)},
    {title:"ã‚´ãƒ¼ãƒ«ã‚«ãƒ¼ãƒ‰ã®è¦‹æ–¹",icon:"ğŸ“‹",content:(<div className="help-section"><div className="help-box"><div className="help-box-title">ã‚«ãƒ¼ãƒ‰å†…ã®æƒ…å ±</div><div className="help-box-item"><span className="help-badge" style={{background:'var(--green-light)',color:'var(--green)'}}>ã‚¿ã‚¤ãƒˆãƒ«</span>ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚´ãƒ¼ãƒ«ã®åå‰</div><div className="help-box-item"><span className="help-badge" style={{background:'var(--surface-3)',color:'var(--ink-3)'}}>å††å½¢ã‚°ãƒ©ãƒ•</span>ç¾åœ¨ã®é€²æ—ç‡ï¼ˆ%ï¼‰</div><div className="help-box-item"><span className="help-badge" style={{background:'var(--amber-light)',color:'var(--amber)'}}>æ®‹â—‹æ—¥ / â—‹æ—¥è¶…é</span>æœŸé™ã¾ã§ã®æ®‹æ—¥æ•°</div></div><div className="help-box" style={{marginTop:12}}><div className="help-box-title">æ³¨æ„ãƒãƒ¼ã‚¯ï¼ˆâš ï¸ï¼‰ã®æ„å‘³</div><div className="help-box-item"><span className="help-chip help-chip--amber">â—‹æ—¥é–“æ›´æ–°ãªã—</span>é•·æœŸé–“é€²æ—ãŒæ›´æ–°ã•ã‚Œã¦ã„ãªã„</div><div className="help-box-item"><span className="help-chip help-chip--amber">ç²’åº¦ãŒç²—ã„</span>ã‚‚ã†å°‘ã—å…·ä½“çš„ã«åˆ†è§£ã§ãã‚‹å¯èƒ½æ€§</div><div className="help-box-item"><span className="help-chip help-chip--red">æœŸé™è¶…é</span>æœŸé™ã‚’éãã¦ã„ã‚‹</div></div></div>)},
    {title:"æ“ä½œã‚¬ã‚¤ãƒ‰",icon:"ğŸ”§",content:(<div className="help-section"><div className="help-box"><div className="help-box-title">ã‚«ãƒ¼ãƒ‰ã®ãƒœã‚¿ãƒ³</div><div className="help-box-item"><span className="help-badge">ãƒ‘ã‚¹ç…§ä¼š</span>ä¸Šä½ã‚´ãƒ¼ãƒ«ã‹ã‚‰ã®çµŒè·¯ã‚’ç¢ºèª</div><div className="help-box-item"><span className="help-badge" style={{background:'var(--amber-light)',color:'var(--amber)'}}>ç¢ºèªã™ã‚‹</span>æ³¨æ„é …ç›®ã‚’ç¢ºèªæ¸ˆã¿ã«ã™ã‚‹</div><div className="help-box-item"><span className="help-badge">è©³ç´°</span>ã‚´ãƒ¼ãƒ«ã®è©³ç´°ç”»é¢ã‚’é–‹ã</div></div><div className="help-box" style={{marginTop:12}}><div className="help-box-title">ãã®ä»–</div><div className="help-box-item"><span className="help-badge">æœŸé™é † / é€²æ—é †</span>ã‚½ãƒ¼ãƒˆãƒœã‚¿ãƒ³ã§ä¸¦ã³æ›¿ãˆ</div><div className="help-box-item"><span className="help-badge">ğŸŒ™ ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰</span>ãƒ˜ãƒƒãƒ€ãƒ¼å³ã®ã‚¢ã‚¤ã‚³ãƒ³ã§åˆ‡æ›¿</div></div></div>)},
    {title:"ã‚´ãƒ¼ãƒ«ãƒ„ãƒªãƒ¼",icon:"ğŸŒ²",content:(<div className="help-section"><div className="help-box"><div className="help-box-title">éšå±¤ãƒ¬ãƒ™ãƒ«</div><div className="help-box-item"><span className="help-chip" style={{background:'var(--blue-light)',color:'var(--blue)'}}>L1</span>å¤§ç›®æ¨™ï¼ˆæœ€ä¸Šä½ï¼‰</div><div className="help-box-item"><span className="help-chip" style={{background:'var(--amber-light)',color:'var(--amber)'}}>L2</span>ä¸­é–“ç›®æ¨™</div><div className="help-box-item"><span className="help-chip" style={{background:'var(--green-light)',color:'var(--green)'}}>L3</span>ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚´ãƒ¼ãƒ«ï¼ˆæœ«ç«¯ï¼‰</div></div><p className="help-text" style={{marginTop:12}}>è¦ªãƒãƒ¼ãƒ‰ã‚’ã‚¿ãƒƒãƒ—ã§å±•é–‹/æŠ˜ã‚ŠãŸãŸã¿ã€‚å³ç«¯ã®æ•°å­—ã¯ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚´ãƒ¼ãƒ«æ•°ã€‚</p></div>)},
    {title:"LINEé€šçŸ¥",icon:"ğŸ’¬",content:(<div className="help-section"><p className="help-text">æ¯æœ 9:50 ã«å±Šãé€šçŸ¥ã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã§ã™ã€‚</p><div className="help-box"><div className="help-box-title">é€šçŸ¥å†…å®¹</div><div className="help-box-item"><span className="help-badge">ã‚´ãƒ¼ãƒ«ä¸€è¦§</span>æœŸé™è¿‘ã„é †ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚´ãƒ¼ãƒ«ã‚’è¡¨ç¤º</div><div className="help-box-item"><span className="help-badge">æ³¨ç›®ãƒã‚¤ãƒ³ãƒˆ</span>AIæ¤œçŸ¥ã®æ¨å¥¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³</div><div className="help-box-item"><span className="help-badge">Webãƒªãƒ³ã‚¯</span>ã‚¿ãƒƒãƒ—ã§Webã‚¢ãƒ—ãƒªã‚’é–‹ã</div></div></div>)},
  ];
  return(
    <div className="overlay" onClick={onClose}><div className="help-modal" onClick={e=>e.stopPropagation()}>
      <div className="help-modal-head"><div className="help-modal-title">ä½¿ã„æ–¹ã‚¬ã‚¤ãƒ‰</div><button className="modal-close" onClick={onClose}><Icon.close/></button></div>
      <div className="help-tabs">{sections.map((s,i)=>(<button key={i} className={"help-tab"+(section===i?" help-tab--active":"")} onClick={()=>setSection(i)}><span className="help-tab-icon">{s.icon}</span><span className="help-tab-label">{s.title}</span></button>))}</div>
      <div className="help-content">{sections[section].content}</div>
      <div className="help-footer"><div className="help-dots">{sections.map((_,i)=><span key={i} className={"help-dot"+(section===i?" help-dot--active":"")} onClick={()=>setSection(i)}/>)}</div>
        <div className="help-nav-btns">{section>0&&<button className="help-nav-btn" onClick={()=>setSection(s=>s-1)}>â† å‰ã¸</button>}{section<sections.length-1?<button className="help-nav-btn help-nav-btn--primary" onClick={()=>setSection(s=>s+1)}>æ¬¡ã¸ â†’</button>:<button className="help-nav-btn help-nav-btn--primary" onClick={onClose}>é–‰ã˜ã‚‹</button>}</div>
      </div>
    </div></div>
  );
}

/* â•â•â• Main App â•â•â• */
function App(){
  const[tab,setTab]=useState("home");
  const[goals,setGoals]=useState(GOALS);
  const[pathGoal,setPathGoal]=useState(null);
  const[dark,setDark]=useState(false);
  const[showHelp,setShowHelp]=useState(false);
  const handleConfirm=useCallback(id=>{setGoals(p=>p.map(g=>g.id===id?{...g,confirmed:!g.confirmed}:g));},[]);
  const leafCount=useMemo(()=>countLeaves(TREE),[]);
  const alertCount=useMemo(()=>goals.filter(g=>g.alertKey).length,[goals]);
  const toggleDark=useCallback(()=>{setDark(d=>{document.documentElement.setAttribute('data-theme',d?'light':'dark');return !d;});},[]);
  const[sortBy,setSortBy]=useState('deadline');
  const[sortDir,setSortDir]=useState('asc');
  const toggleSort=useCallback(f=>{if(sortBy===f)setSortDir(d=>d==='asc'?'desc':'asc');else{setSortBy(f);setSortDir('asc');}},[sortBy]);
  const sortedGoals=useMemo(()=>{const a=[...goals];a.sort((x,y)=>{let v;if(sortBy==='deadline'){const ra=calcRemainingDays(x.deadline)??999,rb=calcRemainingDays(y.deadline)??999;v=ra-rb;}else{v=(x.progress||0)-(y.progress||0);}return sortDir==='asc'?v:-v;});return a;},[goals,sortBy,sortDir]);
  const lineGoals=useMemo(()=>[...goals].sort((a,b)=>(calcRemainingDays(a.deadline)??999)-(calcRemainingDays(b.deadline)??999)),[goals]);
  const tabs=[{id:"home",label:"ä»Šæ—¥ã®ã‚´ãƒ¼ãƒ«"},{id:"tree",label:"ã‚´ãƒ¼ãƒ«ãƒ„ãƒªãƒ¼"},{id:"line",label:"LINEé€šçŸ¥"}];

  const avgProgress=useMemo(()=>goals.length>0?Math.round(goals.reduce((s,g)=>s+(g.progress||0),0)/goals.length):0,[goals]);

  return(
    <div className="app">
      <PathPopup show={pathGoal!==null} title={pathGoal?pathGoal.title:""} path={pathGoal?pathGoal.path:[]} onClose={()=>setPathGoal(null)}/>
      <HelpGuide show={showHelp} onClose={()=>setShowHelp(false)}/>

      {/* â”€â”€ Sticky Top Bar â”€â”€ */}
      <div className="sticky-top">

      {/* â”€â”€ Editorial Header â”€â”€ */}
      <header className="header">
        <div className="container header-inner">
          <div className="header-left">
            <div className="header-brand">
              <div className="header-brand-title">Focus Goals</div>
            </div>
          </div>
          <div className="header-right">
            <div className="header-identity">
              <div className="header-date">{TODAY_JP}</div>
              <div className="header-name">æ˜Ÿé‡ èˆœ<span className="header-dept">ã‚³ãƒ¼ãƒãƒ¬ãƒ¼ãƒˆ</span></div>
            </div>
            <button className="dm-switch" onClick={toggleDark} title={dark?"ãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰ã«åˆ‡æ›¿":"ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ã«åˆ‡æ›¿"}>
              {dark?<Icon.sun style={{color:'var(--amber)'}}/>:<Icon.moon style={{color:'var(--ink-3)'}}/>}
            </button>
            <button className="help-trigger" onClick={()=>setShowHelp(true)} title="ä½¿ã„æ–¹ã‚¬ã‚¤ãƒ‰"><Icon.help/></button>
          </div>
        </div>
      </header>

      {/* â”€â”€ Metrics Strip â”€â”€ */}
      <div className="metrics-strip">
        <div className="container metrics-inner">
          {[
            {label:"ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚´ãƒ¼ãƒ«",value:leafCount,color:"var(--ink)"},
            {label:"æ³¨æ„é …ç›®",value:alertCount,color:alertCount>0?"var(--amber)":"var(--green)"},
            {label:"å¹³å‡é€²æ—",value:avgProgress+"%",color:"var(--accent)"},
          ].map((m,i)=>(
            <div key={i} className="metric-cell">
              <div className="metric-value" style={{color:m.color}}>{m.value}</div>
              <div className="metric-label">{m.label}</div>
            </div>
          ))}
        </div>
      </div>

      {/* â”€â”€ Nav â”€â”€ */}
      <nav className="nav"><div className="container nav-inner">
        {tabs.map(t=>(<button key={t.id} className={"nav-btn"+(tab===t.id?" nav-btn--active":"")} onClick={()=>setTab(t.id)}>{t.label}</button>))}
      </div></nav>

      </div>{/* end sticky-top */}

      <main className="main"><div className="container">

        {tab==="home"&&(
          <div className="page fade-in">
            <div className="insight-card">
              <div className="insight-marker"/>
              <div className="insight-content">
                <div className="insight-label">æ³¨ç›®ãƒã‚¤ãƒ³ãƒˆ</div>
                <p className="insight-body">
                  ã€Œ<strong style={{color:'var(--amber)'}}>å–å¼•å…ˆã®ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’ä½œã‚‹</strong>ã€ãŒã—ã°ã‚‰ãæ›´æ–°ãŒã‚ã‚Šã¾ã›ã‚“ã€‚ä»Šæ—¥30åˆ†ã ã‘ã§ã‚‚ãƒ‡ãƒ¼ã‚¿é …ç›®ã®æ´—ã„å‡ºã—ã«ç€æ‰‹ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚
                </p>
              </div>
            </div>

            <div className="sort-bar">
              <div className="section-label">æœ¬æ—¥ã®ãƒ•ã‚©ãƒ¼ã‚«ã‚¹</div>
              <div className="sort-buttons">
                <button className={"sort-btn"+(sortBy==='deadline'?" sort-btn--active":"")} onClick={()=>toggleSort('deadline')}>
                  æœŸé™é † {sortBy==='deadline'&&(sortDir==='asc'?<Icon.sortAsc/>:<Icon.sortDesc/>)}
                </button>
                <button className={"sort-btn"+(sortBy==='progress'?" sort-btn--active":"")} onClick={()=>toggleSort('progress')}>
                  é€²æ—é † {sortBy==='progress'&&(sortDir==='asc'?<Icon.sortAsc/>:<Icon.sortDesc/>)}
                </button>
              </div>
            </div>

            <div className="goal-list">
              {sortedGoals.map((g,i)=><GoalCard key={g.id} goal={g} index={i} onConfirm={handleConfirm} onPath={gl=>setPathGoal(gl)} delay={i*45+80}/>)}
            </div>
          </div>
        )}

        {tab==="tree"&&(
          <div className="page fade-in">
            <div className="tree-legend">{LEVEL_META.map((m,i)=>(<span key={i} className="legend-chip"><span className="legend-dot" style={{background:m.color}}/>{m.tag}</span>))}<span className="legend-chip"><span className="legend-dot" style={{background:'var(--amber)'}}/> æ³¨æ„</span></div>
            <div className="tree-root"><div className="tree-root-inner"><span className="t-tag" style={{background:'var(--blue-light)',color:'var(--blue)'}}>L1</span><span className="tree-root-title">æ˜Ÿé‡èˆœ å…¨ä½“ã‚´ãƒ¼ãƒ«</span><span className="tree-root-sub">3æœ¬æŸ± â†’ ãƒ•ã‚©ãƒ¼ã‚«ã‚¹{leafCount}ä»¶</span></div></div>
            <div className="tree-container">{TREE.children.map((c,i)=><TreeNode key={c.id} node={c} depth={1} isLast={i===TREE.children.length-1}/>)}</div>
          </div>
        )}

        {tab==="line"&&(
          <div className="page fade-in">
            <p style={{textAlign:'center',color:'var(--ink-3)',fontSize:13,marginBottom:20,fontFamily:'var(--font-sans)'}}>æ¯æœ 9:50 ã«ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥ã§å±Šãã‚¤ãƒ¡ãƒ¼ã‚¸</p>
            <LINEPhone>
              <div className="lb-head">ãŠã¯ã‚ˆã†ã”ã–ã„ã¾ã™ã€æ˜Ÿé‡ã•ã‚“</div>
              <div className="lb-greet">ä»Šæ—¥ã®ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚´ãƒ¼ãƒ« {goals.length}ä»¶ï¼ˆæœŸé™é †ï¼‰</div>
              {lineGoals.map((g,i)=>{const r=calcRemainingDays(g.deadline);const isW=g.status==="warning"||g.alertKey;return(
                <div key={i} className={"lb-line-item"+(isW?" lb-line-item--warn":"")}>
                  <span className="lb-line-title">{g.title}</span>
                  <span className="lb-line-days" style={{color:r!==null&&r<0?'#c44':r!==null&&r<7?'#b8860b':'#999'}}>{r!==null&&(r<0?`${Math.abs(r)}æ—¥è¶…é`:`æ®‹${r}æ—¥`)}</span>
                </div>);
              })}
              <div className="lb-suggest"><div className="lb-suggest-label">æ³¨ç›®ãƒã‚¤ãƒ³ãƒˆ</div><div className="lb-suggest-text">ã€Œå–å¼•å…ˆãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ã€ãŒã—ã°ã‚‰ãæ›´æ–°ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ä»Šæ—¥30åˆ†ã€ãƒ‡ãƒ¼ã‚¿é …ç›®ã®æ´—ã„å‡ºã—ã‚’ã€‚</div></div>
              <div className="lb-btns"><div className="lb-btn lb-btn--primary">Webã§è©³ç´°ã‚’è¦‹ã‚‹ â†’</div></div>
            </LINEPhone>
          </div>
        )}

      </div></main>

      <footer className="footer"><div className="container footer-inner">
        <span>ADDNESS FOCUS GOAL SYSTEM</span><span>v2.0</span>
      </div></footer>
    </div>
  );
}
ReactDOM.createRoot(document.getElementById("root")).render(<App/>);
</script>

<style>
/* â•â•â• Header â€” Editorial â•â•â• */
.header{padding:12px 0 10px;border-bottom:var(--border-thick);transition:border-color 0.4s;}
.header-inner{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:10px;}
.header-brand-label{font-size:9px;font-weight:700;letter-spacing:4px;color:var(--accent);text-transform:uppercase;font-family:var(--font-sans);}
.header-brand-title{font-size:24px;font-weight:300;color:var(--ink);line-height:1.1;letter-spacing:-1px;font-style:italic;}
.header-right{display:flex;align-items:center;gap:14px;}
.header-identity{text-align:right;}
.header-date{font-size:10px;color:var(--ink-3);font-family:var(--font-sans);}
.header-name{font-size:17px;font-weight:700;color:var(--ink);font-family:var(--font-sans);line-height:1.2;}
.header-dept{font-size:11px;color:var(--ink-4);font-weight:400;margin-left:8px;}
@media(min-width:768px){.header-brand-title{font-size:28px;}.header-name{font-size:19px;}}

.dm-switch{display:flex;align-items:center;justify-content:center;width:34px;height:34px;border-radius:50%;border:var(--border-thin);background:var(--surface-2);cursor:pointer;transition:all 0.2s;}
.dm-switch:hover{border-color:var(--ink-4);background:var(--surface-3);}
.help-trigger{display:flex;align-items:center;justify-content:center;width:34px;height:34px;border-radius:50%;border:var(--border-thin);background:var(--surface-2);cursor:pointer;color:var(--ink-3);transition:all 0.15s;flex-shrink:0;}
.help-trigger:hover{border-color:var(--ink-4);background:var(--surface-3);color:var(--ink);}

/* â•â•â• Metrics Strip â€” Newspaper column â•â•â• */
.metrics-strip{border-bottom:var(--border-thin);}
.metrics-inner{display:grid;grid-template-columns:1fr 1fr 1fr;}
.metric-cell{padding:10px 16px;text-align:center;border-right:var(--border-thin);}
.metric-cell:last-child{border-right:none;}
.metric-value{font-size:24px;font-weight:300;font-family:var(--font-sans);line-height:1;}
.metric-label{font-size:8px;color:var(--ink-4);letter-spacing:1.5px;margin-top:4px;font-family:var(--font-sans);text-transform:uppercase;}
@media(min-width:768px){.metric-value{font-size:28px;}}

/* â•â•â• Sticky Top â•â•â• */
.sticky-top{position:sticky;top:0;z-index:50;background:var(--surface);backdrop-filter:blur(12px);transition:background 0.4s;box-shadow:var(--shadow-sm);}

/* â•â•â• Nav â€” Underline tabs â•â•â• */
.nav{border-bottom:var(--border-thin);transition:background 0.4s,border-color 0.4s;}
.nav-inner{display:flex;gap:0;}
.nav-btn{flex:1;padding:10px 0;border:none;background:transparent;font-family:var(--font-sans);font-size:12px;font-weight:500;color:var(--ink-4);cursor:pointer;border-bottom:2px solid transparent;transition:color 0.2s;letter-spacing:0.5px;}
.nav-btn:hover{color:var(--ink-2);}
.nav-btn--active{color:var(--accent);font-weight:700;border-bottom-color:var(--accent);}
@media(min-width:768px){.nav-btn{font-size:13px;padding:12px 0;}}

/* â•â•â• Main â•â•â• */
.main{padding:24px 0 60px;}
@media(min-width:768px){.main{padding:32px 0 80px;}}
@keyframes fadeIn{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:translateY(0)}}
.fade-in{animation:fadeIn 0.3s ease forwards;}

/* â•â•â• Insight Card â€” Editorial callout â•â•â• */
.insight-card{display:flex;gap:16px;padding:18px 20px;margin-bottom:24px;border-left:3px solid var(--accent);background:var(--card);border-radius:0 var(--radius-lg) var(--radius-lg) 0;box-shadow:var(--shadow-sm);transition:background 0.4s;}
.insight-marker{width:2px;flex-shrink:0;}
.insight-content{flex:1;}
.insight-label{font-size:10px;font-weight:700;letter-spacing:2px;color:var(--accent);text-transform:uppercase;margin-bottom:6px;font-family:var(--font-sans);}
.insight-body{font-size:14px;color:var(--ink-2);line-height:1.7;}
@media(min-width:768px){.insight-card{padding:22px 28px;}}

/* â•â•â• Sort Bar â•â•â• */
.sort-bar{display:flex;align-items:center;justify-content:space-between;margin-bottom:14px;padding-bottom:10px;border-bottom:var(--border-thin);}
.section-label{font-size:10px;font-weight:700;letter-spacing:3px;color:var(--ink-4);text-transform:uppercase;font-family:var(--font-sans);}
.sort-buttons{display:flex;gap:6px;}
.sort-btn{display:flex;align-items:center;gap:4px;padding:6px 12px;border-radius:6px;border:var(--border-thin);background:transparent;color:var(--ink-3);font-size:11px;font-weight:600;cursor:pointer;font-family:var(--font-sans);transition:all 0.15s;}
.sort-btn:hover{border-color:var(--ink-4);background:var(--surface-2);}
.sort-btn--active{color:var(--ink);border-color:var(--ink-4);background:var(--surface-2);}

/* â•â•â• Goal Row â€” Editorial list with stripe â•â•â• */
.goal-list{display:flex;flex-direction:column;}
.g-row{display:flex;gap:14px;padding:16px 20px;border-left:3px solid transparent;transition:background 0.15s,border-color 0.3s;}
.g-row--stripe{background:var(--stripe);}
.g-row--warn{border-left-color:var(--amber);}
.g-num{font-size:12px;color:var(--ink-4);font-family:var(--font-sans);font-variant-numeric:tabular-nums;width:24px;flex-shrink:0;padding-top:3px;font-weight:600;}
.g-main{flex:1;min-width:0;}
.g-top{display:flex;align-items:flex-start;gap:16px;}
.g-info{flex:1;min-width:0;}
.g-title{font-size:14px;color:var(--ink);line-height:1.55;font-weight:400;}
.g-alert{display:inline-flex;align-items:center;gap:4px;font-size:10px;color:var(--amber);font-weight:600;margin-top:4px;font-family:var(--font-sans);}
.g-path{font-size:10px;color:var(--ink-4);margin-top:4px;font-family:var(--font-sans);}
.g-stats{display:flex;flex-direction:column;align-items:center;gap:4px;flex-shrink:0;}
.g-days{font-size:10px;font-weight:600;font-family:var(--font-sans);font-variant-numeric:tabular-nums;white-space:nowrap;}
.g-actions{display:flex;gap:6px;margin-top:10px;}
.g-btn{padding:6px 12px;border-radius:6px;border:var(--border-thin);background:transparent;color:var(--ink-3);font-size:11px;font-weight:600;cursor:pointer;font-family:var(--font-sans);display:flex;align-items:center;gap:4px;transition:all 0.15s;white-space:nowrap;}
.g-btn:hover{background:var(--surface-2);border-color:var(--ink-4);}
.g-btn--ack{background:var(--amber-light);border-color:var(--amber-muted);color:var(--amber);}
.g-btn--ack:hover{background:var(--amber-muted);}
.g-btn--acked{background:var(--green-light);border-color:var(--green-muted);color:var(--green);}
.g-btn--detail{margin-left:auto;}
@media(min-width:768px){.g-row{padding:18px 24px;}.g-title{font-size:15px;}}

/* â•â•â• Progress Row â•â•â• */
.progress-row{display:flex;align-items:center;gap:10px;}
.progress-days{font-size:10px;font-weight:600;font-family:var(--font-sans);font-variant-numeric:tabular-nums;white-space:nowrap;}

/* â•â•â• Tree â•â•â• */
.tree-legend{display:flex;flex-wrap:wrap;gap:6px;justify-content:center;margin-bottom:16px;}
.legend-chip{display:inline-flex;align-items:center;gap:5px;font-size:11px;color:var(--ink-3);font-weight:500;padding:4px 10px;border-radius:20px;background:var(--card);border:var(--border-thin);font-family:var(--font-sans);transition:background 0.3s;}
.legend-dot{width:7px;height:7px;border-radius:50%;flex-shrink:0;}
.tree-root{background:var(--card);border:var(--border-thin);border-radius:var(--radius-lg);padding:14px 18px;margin-bottom:16px;box-shadow:var(--shadow-sm);transition:background 0.4s;}
.tree-root-inner{display:flex;align-items:center;gap:8px;flex-wrap:wrap;}
.tree-root-title{font-size:14px;font-weight:800;color:var(--ink);font-family:var(--font-sans);}
.tree-root-sub{font-size:11px;color:var(--ink-4);margin-left:auto;font-family:var(--font-sans);}
.tree-container{padding-left:4px;}
.t-item{display:flex;}
.t-rail{display:flex;flex-direction:column;align-items:center;width:20px;flex-shrink:0;}
.t-dot{width:8px;height:8px;border-radius:50%;flex-shrink:0;margin-top:16px;}
.t-line{flex:1;width:1.5px;background:var(--surface-3);margin:2px 0;}
.t-body{flex:1;min-width:0;padding-bottom:8px;}
.t-card{background:var(--card);border:var(--border-thin);border-radius:var(--radius);padding:10px 14px;margin-left:6px;transition:box-shadow 0.15s,background 0.4s;}
.t-card--parent{cursor:pointer;}
.t-card--parent:hover{box-shadow:var(--shadow-sm);border-color:var(--ink-4);}
.t-card--warn{border-left:3px solid var(--amber);background:var(--amber-light);}
.t-card-top{display:flex;align-items:center;gap:6px;}
.t-tag{font-size:9px;font-weight:800;padding:2px 7px;border-radius:4px;white-space:nowrap;flex-shrink:0;letter-spacing:0.3px;font-family:var(--font-sans);}
.t-title{font-size:12px;font-weight:600;color:var(--ink);flex:1;min-width:0;line-height:1.5;font-family:var(--font-sans);}
.t-card--leaf .t-title{font-weight:400;color:var(--ink-2);}
.t-card-right{display:flex;align-items:center;gap:6px;flex-shrink:0;}
.t-alert{display:flex;align-items:center;gap:3px;font-size:10px;color:var(--amber);font-weight:600;white-space:nowrap;font-family:var(--font-sans);}
.t-days{font-size:10px;font-weight:600;white-space:nowrap;font-variant-numeric:tabular-nums;font-family:var(--font-sans);}
.t-count{font-size:10px;font-weight:700;color:var(--ink-4);background:var(--surface-2);padding:1px 7px;border-radius:10px;font-family:var(--font-sans);}
.t-arrow{color:var(--ink-4);transition:transform 0.2s;display:inline-flex;}
.t-arrow--open{transform:rotate(90deg);}
.t-card-bottom{margin-top:8px;display:flex;align-items:center;gap:10px;flex-wrap:wrap;}
.t-meta{font-size:10px;color:var(--ink-3);white-space:nowrap;font-variant-numeric:tabular-nums;font-family:var(--font-sans);}
.t-mini-progress{display:flex;align-items:center;gap:4px;flex:1;min-width:80px;}
.t-mini-track{flex:1;height:3px;background:var(--surface-3);border-radius:2px;overflow:hidden;}
.t-mini-fill{height:100%;border-radius:2px;transition:width 0.6s ease;}
.t-mini-pct{font-size:9px;font-weight:700;color:var(--ink-3);font-variant-numeric:tabular-nums;font-family:var(--font-sans);}

/* â•â•â• Modal â•â•â• */
.overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(42,36,24,0.25);backdrop-filter:blur(4px);z-index:999;display:flex;align-items:center;justify-content:center;padding:20px;}
.modal{background:var(--card);border-radius:var(--radius-lg);padding:24px;max-width:460px;width:100%;box-shadow:var(--shadow-lg);animation:fadeIn 0.25s ease;transition:background 0.4s;border:var(--border-thin);}
.modal-head{display:flex;align-items:flex-start;justify-content:space-between;margin-bottom:20px;}
.modal-title{font-size:16px;font-weight:800;color:var(--ink);font-family:var(--font-sans);}
.modal-sub{font-size:11px;color:var(--ink-4);margin-top:2px;font-family:var(--font-sans);}
.modal-close{background:none;border:none;color:var(--ink-4);cursor:pointer;padding:4px;border-radius:6px;}
.modal-close:hover{background:var(--surface-2);}
.path-list{display:flex;flex-direction:column;}
.path-item{display:flex;}
.path-rail{display:flex;flex-direction:column;align-items:center;width:20px;flex-shrink:0;}
.path-dot{width:10px;height:10px;border-radius:50%;flex-shrink:0;margin-top:10px;}
.path-line{flex:1;width:1.5px;background:var(--surface-3);margin:3px 0;}
.path-body{flex:1;padding:8px 14px;margin-left:8px;margin-bottom:8px;border-radius:var(--radius);background:var(--surface-2);border:var(--border-thin);transition:background 0.4s;}
.path-body--leaf{background:var(--green-light);border-color:var(--green-muted);}
.path-label{font-size:9px;font-weight:700;display:block;margin-bottom:2px;font-family:var(--font-sans);}
.path-text{font-size:13px;color:var(--ink);font-weight:500;line-height:1.5;}
.path-body--leaf .path-text{color:var(--green);font-weight:700;}

/* â•â•â• LINE Phone (always light) â•â•â• */
.phone-wrap{display:flex;justify-content:center;padding:10px 0;}
.phone-frame{width:320px;background:#8FBCBB;border-radius:40px;border:5px solid #1a1a1a;overflow:hidden;box-shadow:0 20px 60px rgba(0,0,0,0.2);position:relative;}
@media(min-width:768px){.phone-frame{width:360px;}}
.phone-status{display:flex;align-items:center;justify-content:space-between;padding:12px 24px 6px;font-size:13px;font-weight:700;color:#1a1a1a;position:relative;}
.phone-time{font-variant-numeric:tabular-nums;}
.phone-island{width:90px;height:24px;border-radius:20px;background:#1a1a1a;position:absolute;left:50%;transform:translateX(-50%);top:8px;}
.phone-status-right{display:flex;align-items:center;gap:5px;}
.phone-battery{width:20px;height:10px;border:1.2px solid #1a1a1a;border-radius:2px;position:relative;}
.phone-battery::after{content:'';position:absolute;right:-3px;top:2.5px;width:1.5px;height:4px;background:#1a1a1a;border-radius:0 1px 1px 0;}
.phone-battery-fill{width:75%;height:100%;background:#1a1a1a;border-radius:1px;}
.line-nav{display:flex;align-items:center;padding:10px 14px;background:rgba(78,130,95,0.85);backdrop-filter:blur(12px);}
.line-nav-left{padding:4px 6px;flex-shrink:0;}
.line-nav-center{flex:1;text-align:center;}
.line-nav-name{font-size:15px;font-weight:700;color:#fff;}
.line-chat{background:linear-gradient(170deg,#8FBCBB 0%,#7EB0A8 30%,#6DA47E 100%);min-height:400px;padding:10px 10px 6px;}
.line-date-pill{display:block;width:fit-content;margin:6px auto 14px;font-size:10px;color:rgba(255,255,255,0.7);background:rgba(0,0,0,0.12);padding:3px 12px;border-radius:12px;}
.line-msg-row{display:flex;align-items:flex-start;gap:8px;}
.line-avatar-circle{width:32px;height:32px;border-radius:50%;flex-shrink:0;background:linear-gradient(135deg,#5a8a6a,#4a7a5a);display:flex;align-items:center;justify-content:center;}
.line-msg-col{flex:1;min-width:0;}
.line-sender{font-size:10px;color:rgba(255,255,255,0.65);margin-bottom:3px;margin-left:2px;}
.line-bubble-wrap{display:flex;align-items:flex-end;gap:5px;}
.line-bubble-body{background:#fff;border-radius:0 16px 16px 16px;padding:14px;font-size:12.5px;color:#1a1a1a;line-height:1.6;box-shadow:0 1px 4px rgba(0,0,0,0.06);flex:1;}
.line-read-time{display:flex;flex-direction:column;align-items:flex-end;font-size:9px;color:rgba(255,255,255,0.55);white-space:nowrap;gap:1px;padding-bottom:2px;}
.line-read{color:rgba(255,255,255,0.45);font-size:8px;}
.line-input-bar{display:flex;align-items:center;gap:8px;padding:8px 10px;background:rgba(255,255,255,0.92);border-top:1px solid rgba(0,0,0,0.06);}
.line-input-plus{width:28px;height:28px;border-radius:50%;background:#e8e8e6;color:#888;display:flex;align-items:center;justify-content:center;font-size:18px;font-weight:300;flex-shrink:0;}
.line-input-field{flex:1;padding:7px 14px;border-radius:20px;background:#f0f0ee;font-size:12px;color:#bbb;}
.phone-home-bar{padding:6px 0 10px;background:rgba(255,255,255,0.92);display:flex;justify-content:center;}
.phone-home-indicator{width:100px;height:4px;border-radius:4px;background:rgba(0,0,0,0.2);}
.lb-head{font-weight:700;font-size:14px;color:#1a1a1a;margin-bottom:8px;padding-bottom:8px;border-bottom:1px solid #eee;}
.lb-greet{font-size:12px;color:#888;margin-bottom:10px;}
.lb-line-item{display:flex;align-items:baseline;justify-content:space-between;gap:8px;padding:5px 8px;background:#f8f8f6;border-radius:6px;margin-bottom:3px;border-left:3px solid #3a8a48;}
.lb-line-item--warn{border-left-color:#b8860b;background:#fef9ee;}
.lb-line-title{font-size:11px;font-weight:500;color:#1a1a1a;flex:1;min-width:0;line-height:1.5;}
.lb-line-days{font-size:9px;font-weight:700;white-space:nowrap;flex-shrink:0;font-variant-numeric:tabular-nums;}
.lb-suggest{background:#f8f6ff;border-radius:8px;padding:10px;margin-bottom:10px;border-left:3px solid #6b5ec4;}
.lb-suggest-label{font-size:10px;color:#6b5ec4;font-weight:700;margin-bottom:2px;}
.lb-suggest-text{font-size:11px;color:#555;line-height:1.5;}
.lb-btns{display:flex;gap:5px;}
.lb-btn{flex:1;text-align:center;padding:8px 0;border-radius:8px;background:#f0f0ee;color:#666;font-size:11px;font-weight:600;}
.lb-btn--primary{background:#4a7048;color:#fff;}

/* â•â•â• Footer â•â•â• */
.footer{border-top:var(--border-thick);padding:16px 0;transition:border-color 0.4s;}
.footer-inner{display:flex;justify-content:space-between;font-size:9px;color:var(--ink-4);letter-spacing:2px;font-family:var(--font-sans);}

/* â•â•â• Help Modal â•â•â• */
.help-modal{background:var(--card);border-radius:var(--radius-lg);max-width:520px;width:100%;max-height:85vh;box-shadow:var(--shadow-lg);animation:fadeIn 0.25s ease;display:flex;flex-direction:column;overflow:hidden;border:var(--border-thin);transition:background 0.4s;}
.help-modal-head{display:flex;align-items:center;justify-content:space-between;padding:20px 24px 16px;border-bottom:var(--border-thin);}
.help-modal-title{font-size:17px;font-weight:800;color:var(--ink);font-family:var(--font-sans);}
.help-tabs{display:flex;gap:2px;padding:12px 16px;overflow-x:auto;-webkit-overflow-scrolling:touch;border-bottom:var(--border-thin);flex-shrink:0;}
.help-tab{display:flex;flex-direction:column;align-items:center;gap:3px;padding:8px 10px;border-radius:8px;border:none;background:transparent;cursor:pointer;font-family:var(--font-sans);transition:all 0.15s;flex-shrink:0;min-width:64px;}
.help-tab:hover{background:var(--surface-2);}
.help-tab--active{background:var(--accent-light);box-shadow:inset 0 0 0 1px var(--accent-muted);}
.help-tab-icon{font-size:18px;line-height:1;}
.help-tab-label{font-size:9px;font-weight:600;color:var(--ink-3);white-space:nowrap;line-height:1.2;}
.help-tab--active .help-tab-label{color:var(--accent);font-weight:700;}
.help-content{flex:1;overflow-y:auto;padding:20px 24px;-webkit-overflow-scrolling:touch;}
.help-text{font-size:13px;color:var(--ink-2);line-height:1.75;}
.help-box{background:var(--surface-2);border:var(--border-thin);border-radius:var(--radius);padding:14px 16px;transition:background 0.4s;}
.help-box-title{font-size:11px;font-weight:800;color:var(--ink-3);margin-bottom:10px;text-transform:uppercase;letter-spacing:0.5px;font-family:var(--font-sans);}
.help-box-item{display:flex;align-items:baseline;gap:8px;font-size:12px;color:var(--ink-2);line-height:1.6;padding:5px 0;}
.help-box-item+.help-box-item{border-top:1px solid var(--surface-3);}
.help-badge{display:inline-flex;align-items:center;padding:2px 8px;border-radius:4px;font-size:10px;font-weight:700;background:var(--surface-3);color:var(--ink-2);white-space:nowrap;flex-shrink:0;font-family:var(--font-sans);}
.help-chip{display:inline-flex;align-items:center;padding:2px 8px;border-radius:10px;font-size:10px;font-weight:700;white-space:nowrap;flex-shrink:0;font-family:var(--font-sans);}
.help-chip--amber{background:var(--amber-light);color:var(--amber);}
.help-chip--red{background:var(--red-light);color:var(--red);}
.help-note{font-size:11px;color:var(--ink-4);margin-top:8px;font-style:italic;}
.help-footer{display:flex;align-items:center;justify-content:space-between;padding:14px 24px;border-top:var(--border-thin);flex-shrink:0;}
.help-dots{display:flex;gap:6px;}
.help-dot{width:7px;height:7px;border-radius:50%;background:var(--surface-3);cursor:pointer;transition:all 0.15s;}
.help-dot--active{background:var(--accent);transform:scale(1.2);}
.help-nav-btns{display:flex;gap:8px;}
.help-nav-btn{padding:7px 16px;border-radius:6px;border:var(--border-thin);background:transparent;color:var(--ink-2);font-size:12px;font-weight:600;cursor:pointer;font-family:var(--font-sans);transition:all 0.15s;}
.help-nav-btn:hover{background:var(--surface-2);border-color:var(--ink-4);}
.help-nav-btn--primary{background:var(--accent);color:#fff;border-color:var(--accent);}
.help-nav-btn--primary:hover{opacity:0.9;}
</style>
</body>
</html>
